import{useApi as e,defineModule as t}from"@directus/extensions-sdk";import{defineComponent as a,ref as n,onMounted as l,resolveComponent as i,openBlock as o,createBlock as r,withCtx as s,createVNode as d,createTextVNode as u,createElementVNode as c}from"vue";const m={class:"company-selector"},p={class:"crm-container"};var v=a({__name:"module",setup(t){const a=e(),v=n(null),f=n([]);return l(async()=>{try{const e=await a.get("/items/companies",{params:{filter:{status:{_eq:"active"}},fields:["id","nome_fantasia","slug"]}});f.value=e.data.data,f.value.length>0&&(v.value=f.value[0].id)}catch(e){console.error("Erro ao carregar empresas:",e)}}),(e,t)=>{const a=i("v-icon"),n=i("v-list-item-icon"),l=i("v-list-item-content"),b=i("v-list-item"),_=i("v-list"),h=i("v-select"),g=i("router-view"),y=i("private-view");return o(),r(y,{title:"CRM - IMOBI"},{navigation:s(()=>[d(_,null,{default:s(()=>[d(b,{to:"/imobi-crm/dashboard",exact:""},{default:s(()=>[d(n,null,{default:s(()=>[d(a,{name:"dashboard"})]),_:1}),d(l,null,{default:s(()=>[...t[1]||(t[1]=[u("Dashboard",-1)])]),_:1})]),_:1}),d(b,{to:"/imobi-crm/conversas",exact:""},{default:s(()=>[d(n,null,{default:s(()=>[d(a,{name:"chat"})]),_:1}),d(l,null,{default:s(()=>[...t[2]||(t[2]=[u("Conversas WhatsApp",-1)])]),_:1})]),_:1}),d(b,{to:"/imobi-crm/leads",exact:""},{default:s(()=>[d(n,null,{default:s(()=>[d(a,{name:"people"})]),_:1}),d(l,null,{default:s(()=>[...t[3]||(t[3]=[u("Leads (Kanban)",-1)])]),_:1})]),_:1}),d(b,{to:"/imobi-crm/imoveis",exact:""},{default:s(()=>[d(n,null,{default:s(()=>[d(a,{name:"home"})]),_:1}),d(l,null,{default:s(()=>[...t[4]||(t[4]=[u("Imóveis",-1)])]),_:1})]),_:1})]),_:1})]),title:s(()=>[d(a,{name:"business",left:""}),t[5]||(t[5]=u(" CRM Imobiliário ",-1))]),headline:s(()=>[c("div",m,[d(h,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),items:f.value,"item-text":"nome_fantasia","item-value":"id",placeholder:"Selecione a empresa"},null,8,["modelValue","items"])])]),default:s(()=>[c("div",p,[d(g,{"company-id":v.value},null,8,["company-id"])])]),_:1})}}}),f=[],b=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var o=f.indexOf(i);-1===o&&(o=f.push(i)-1,b[o]={}),a=b[o]&&b[o][n]?b[o][n]:b[o][n]=r()}else a=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),l=0;l<a.length;l++)e.setAttribute(a[l],t.attributes[a[l]]);var o="prepend"===n?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.crm-container[data-v-7afb4391] {\r\n  padding: var(--content-padding);\r\n  padding-top: var(--content-padding-bottom);\n}\n.company-selector[data-v-7afb4391] {\r\n  max-width: 300px;\n}\r\n",{});var _=t({id:"imobi-crm",name:"CRM",icon:"business",routes:[{path:"",component:((e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a})(v,[["__scopeId","data-v-7afb4391"],["__file","module.vue"]])}]});export{_ as default};
